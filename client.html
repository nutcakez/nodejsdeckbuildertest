<button onclick='Createroom()'>Create room</button>
<button onclick="joinroom()">Join room</button>
<button onclick="delayedfun()">Delayed message</button>
<button onclick="test()">TEST</button>
<button onclick="changez()"> set promise </button>
<button onclick="selfmessage()">self message</button>
<br>
<button onclick="imhere()">IM HERE</button>
<textarea id="roomnumber"></textarea>
<div id="playground">
    <div id="rooms">   
    </div>
</div>
<div id="gamearea">
    <button>1</button>
    <button>2</button>
</div>
<link rel="stylesheet"  href="style.css">
<script
  src="https://code.jquery.com/jquery-3.4.1.js"
  integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"></script>
<script>
    var socket=io();

    socket.on('availablerooms',function(data){
        DisplayRooms(data);
    })

 
    // let promise1;
    // async function test(){
    //     var message=await setpromise();
    //     console.log(message);
    // }
   
    // change={
    //     value:10,
    //     valuelistener:function(val){},
    //     set value(val){
    //         this.value=val;
    //         this.valuelistener(val);
    //     },
    //     get value(){
    //         return this.value;
    //     },
    //     registerListener:function(listener){
    //         this.valuelistener=listener;
    //     }
    // }

    
    // function changez(){
    //     change.value=11;
    // }

    function SendCardBuyChoise(id){
        socket.emit('buycard',{'id':id});
    }

    function Createroom(){
        console.log("Create room pressed");
        socket.emit('CreateNewRoom');
    }

    function selfmessage(){
        socket.emit('mymessage');
    }


   function DisplayRooms(roomarray){
       console.log(roomarray)
        $('#rooms').remove();
        $('#playground').append("<div id='rooms'></div)")
        console.log("starting for")
        for (var key in roomarray['rooms']) {
            console.log('roomidk '+key)
            $('#rooms').append("<span onclick=joinroom('"+key+"')>"+key+"</span><br>")
        };    
        
   }

   function joinroom(id){
        console.log("sending joinroom");
        socket.emit('joinroom',{'room':id});
   }

   function delayedfun(){
        socket.emit('delayed');
   }

   function imhere(){
        socket.emit('IMHERE');
   }

</script>